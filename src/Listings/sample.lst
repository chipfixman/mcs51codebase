C51 COMPILER V9.54   SAMPLE                                                                11/10/2025 21:27:44 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE SAMPLE
OBJECT MODULE PLACED IN .\Objects\sample.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE sample.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\sa
                    -mple.lst) TABS(2) OBJECT(.\Objects\sample.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "sample.h"
   3          #include "func.h"
   4          #include "LCD1602.h"
   5          #include "MatrixKey.h"
   6          
   7          void LedLightEvery500ms()
   8          {
   9   1        while(1)
  10   1        {
  11   2          P2=0xFE;  //1111 1110
  12   2          // P2=0xFD; //1111 1101
  13   2          Delay500ms();
  14   2          P2=0xFF;  //1111 1111
  15   2          Delay500ms();
  16   2        }
  17   1      }
  18          
  19          
  20          
  21          
  22          void LedLightOnebyOne() 
  23          {
  24   1          while(1)
  25   1        {
  26   2          P2=0xFE;//1111 1110
  27   2          Delay500ms();
  28   2          P2=0xFD;//1111 1101
  29   2          Delay500ms();
  30   2          P2=0xFB;//1111 1011
  31   2          Delay500ms();
  32   2          P2=0xF7;//1111 0111
  33   2          Delay500ms();
  34   2          P2=0xEF;//1110 1111
  35   2          Delay500ms();
  36   2          P2=0xDF;//1101 1111
  37   2          Delay500ms();
  38   2          P2=0xBF;//1011 1111
  39   2          Delay500ms();
  40   2          P2=0x7F;//0111 1111
  41   2          Delay500ms();
  42   2        }
  43   1      
  44   1      }
  45          
  46          
  47          void PressDownControlLed()
  48          {
  49   1        while(1)
  50   1        {
  51   2          if(P3_1==0 || P3_0==0)  //如果K1按键或K2按键按下
  52   2          {
  53   3            P2_0=0;   //LED1输出0，点亮
  54   3          }
C51 COMPILER V9.54   SAMPLE                                                                11/10/2025 21:27:44 PAGE 2   

  55   2          else
  56   2          {
  57   3            P2_0=1;   //LED1输出1，熄灭
  58   3          }
  59   2        }
  60   1      }
  61          
  62          
  63          void ButtonControlLed()
  64          {
  65   1        while(1)
  66   1        {
  67   2          if(P3_1==0)     //如果K1按键按下
  68   2          {
  69   3            Delay(20);    //延时消抖
  70   3            while(P3_1==0); //松手检测
  71   3            Delay(20);    //延时消抖
  72   3            
  73   3            P2_0=~P2_0;   //LED1取反
  74   3          }
  75   2        }
  76   1      }
  77          
  78          
  79          void ButtonLedBinaryCalc()
  80          {
  81   1        unsigned char LEDNum=0;
  82   1        while(1)
  83   1        {
  84   2          if(P3_1==0)     //如果K1按键按下
  85   2          {
  86   3            Delay(20);    //延时消抖
  87   3            while(P3_1==0); //松手检测
  88   3            Delay(20);    //延时消抖
  89   3            
  90   3            LEDNum++;   //变量自增
  91   3            P2=~LEDNum;   //变量取反输出给LED
  92   3          }
  93   2        }
  94   1      }
  95          
  96          
  97          void BUttonPrevNextLed()
  98          {
  99   1          unsigned char LEDNum;
 100   1        P2=~0x01;       //上电默认LED1点亮
 101   1        while(1)
 102   1        {
 103   2          if(P3_1==0)     //如果K1按键按下
 104   2          {
 105   3            Delay(20);
 106   3            while(P3_1==0);
 107   3            Delay(20);
 108   3            
 109   3            LEDNum++;   //LEDNum自增
 110   3            if(LEDNum>=8) //限制LEDNum自增范围
 111   3              LEDNum=0;
 112   3            P2=~(0x01<<LEDNum); //LED的第LEDNum位点亮
 113   3          }
 114   2          if(P3_0==0)     //如果K2按键按下
 115   2          {
 116   3            Delay(20);
C51 COMPILER V9.54   SAMPLE                                                                11/10/2025 21:27:44 PAGE 3   

 117   3            while(P3_0==0);
 118   3            Delay(20);
 119   3            
 120   3            if(LEDNum==0) //LEDNum减到0后变为7
 121   3              LEDNum=7;
 122   3            else      //LEDNum未减到0，自减
 123   3              LEDNum--;
 124   3            P2=~(0x01<<LEDNum); //LED的第LEDNum位点亮
 125   3          }
 126   2        }
 127   1      }
 128          
 129          void display123()
 130          {
 131   1        while(1)
 132   1        {
 133   2          Nixie(1,1);   //在数码管的第1位置显示1
 134   2      //    Delay(20);
 135   2          Nixie(2,2);   //在数码管的第2位置显示2
 136   2      //    Delay(20);
 137   2          Nixie(3,3);   //在数码管的第3位置显示3
 138   2      //    Delay(20);
 139   2        }
 140   1      }
 141          
 142          
 143          
 144          
 145          void LCD1602_Sample()
 146          {
 147   1          int Result=0;
 148   1        LCD_Init();
 149   1        while(1)
 150   1        {
 151   2          Result++;         //Result自增
 152   2          Delay(1000);        //延时1秒
 153   2          LCD_ShowNum(1,1,Result,3);  //在LCD的1行1列显示Result，长度为3位
 154   2        }
 155   1      }
 156          
 157          
 158          
 159          void MatrixKeySample()
 160          {
 161   1        
 162   1        unsigned char KeyNum;
 163   1      
 164   1        LCD_Init();             //LCD初始化
 165   1        LCD_ShowString(1,1,"MatrixKey:"); //LCD显示字符串
 166   1        while(1)
 167   1        {
 168   2          KeyNum=MatrixKey();       //获取矩阵键盘键码
 169   2          if(KeyNum)            //如果有按键按下
 170   2          {
 171   3            LCD_ShowNum(2,1,KeyNum,2);  //LCD显示键码
 172   3          }
 173   2        }
 174   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    342    ----
C51 COMPILER V9.54   SAMPLE                                                                11/10/2025 21:27:44 PAGE 4   

   CONSTANT SIZE    =     11    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
