C51 COMPILER V9.54   SAMPLE                                                                11/09/2025 19:48:27 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE SAMPLE
OBJECT MODULE PLACED IN .\Objects\sample.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE sample.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\sa
                    -mple.lst) TABS(2) OBJECT(.\Objects\sample.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "sample.h"
   3          #include "func.h"
   4          #include "LCD1602.h"
   5          
   6          void LedLightEvery500ms()
   7          {
   8   1        while(1)
   9   1        {
  10   2          P2=0xFE;  //1111 1110
  11   2          // P2=0xFD; //1111 1101
  12   2          Delay500ms();
  13   2          P2=0xFF;  //1111 1111
  14   2          Delay500ms();
  15   2        }
  16   1      }
  17          
  18          
  19          
  20          
  21          void LedLightOnebyOne() 
  22          {
  23   1          while(1)
  24   1        {
  25   2          P2=0xFE;//1111 1110
  26   2          Delay500ms();
  27   2          P2=0xFD;//1111 1101
  28   2          Delay500ms();
  29   2          P2=0xFB;//1111 1011
  30   2          Delay500ms();
  31   2          P2=0xF7;//1111 0111
  32   2          Delay500ms();
  33   2          P2=0xEF;//1110 1111
  34   2          Delay500ms();
  35   2          P2=0xDF;//1101 1111
  36   2          Delay500ms();
  37   2          P2=0xBF;//1011 1111
  38   2          Delay500ms();
  39   2          P2=0x7F;//0111 1111
  40   2          Delay500ms();
  41   2        }
  42   1      
  43   1      }
  44          
  45          
  46          void PressDownControlLed()
  47          {
  48   1        while(1)
  49   1        {
  50   2          if(P3_1==0 || P3_0==0)  //如果K1按键或K2按键按下
  51   2          {
  52   3            P2_0=0;   //LED1输出0，点亮
  53   3          }
  54   2          else
C51 COMPILER V9.54   SAMPLE                                                                11/09/2025 19:48:27 PAGE 2   

  55   2          {
  56   3            P2_0=1;   //LED1输出1，熄灭
  57   3          }
  58   2        }
  59   1      }
  60          
  61          
  62          void ButtonControlLed()
  63          {
  64   1        while(1)
  65   1        {
  66   2          if(P3_1==0)     //如果K1按键按下
  67   2          {
  68   3            Delay(20);    //延时消抖
  69   3            while(P3_1==0); //松手检测
  70   3            Delay(20);    //延时消抖
  71   3            
  72   3            P2_0=~P2_0;   //LED1取反
  73   3          }
  74   2        }
  75   1      }
  76          
  77          
  78          void ButtonLedBinaryCalc()
  79          {
  80   1        unsigned char LEDNum=0;
  81   1        while(1)
  82   1        {
  83   2          if(P3_1==0)     //如果K1按键按下
  84   2          {
  85   3            Delay(20);    //延时消抖
  86   3            while(P3_1==0); //松手检测
  87   3            Delay(20);    //延时消抖
  88   3            
  89   3            LEDNum++;   //变量自增
  90   3            P2=~LEDNum;   //变量取反输出给LED
  91   3          }
  92   2        }
  93   1      }
  94          
  95          
  96          void BUttonPrevNextLed()
  97          {
  98   1          unsigned char LEDNum;
  99   1        P2=~0x01;       //上电默认LED1点亮
 100   1        while(1)
 101   1        {
 102   2          if(P3_1==0)     //如果K1按键按下
 103   2          {
 104   3            Delay(20);
 105   3            while(P3_1==0);
 106   3            Delay(20);
 107   3            
 108   3            LEDNum++;   //LEDNum自增
 109   3            if(LEDNum>=8) //限制LEDNum自增范围
 110   3              LEDNum=0;
 111   3            P2=~(0x01<<LEDNum); //LED的第LEDNum位点亮
 112   3          }
 113   2          if(P3_0==0)     //如果K2按键按下
 114   2          {
 115   3            Delay(20);
 116   3            while(P3_0==0);
C51 COMPILER V9.54   SAMPLE                                                                11/09/2025 19:48:27 PAGE 3   

 117   3            Delay(20);
 118   3            
 119   3            if(LEDNum==0) //LEDNum减到0后变为7
 120   3              LEDNum=7;
 121   3            else      //LEDNum未减到0，自减
 122   3              LEDNum--;
 123   3            P2=~(0x01<<LEDNum); //LED的第LEDNum位点亮
 124   3          }
 125   2        }
 126   1      }
 127          
 128          void display123()
 129          {
 130   1        while(1)
 131   1        {
 132   2          Nixie(1,1);   //在数码管的第1位置显示1
 133   2      //    Delay(20);
 134   2          Nixie(2,2);   //在数码管的第2位置显示2
 135   2      //    Delay(20);
 136   2          Nixie(3,3);   //在数码管的第3位置显示3
 137   2      //    Delay(20);
 138   2        }
 139   1      }
 140          
 141          
 142          
 143          
 144          void LCD1602_Sample()
 145          {
 146   1          int Result=0;
 147   1        LCD_Init();
 148   1        while(1)
 149   1        {
 150   2          Result++;         //Result自增
 151   2          Delay(1000);        //延时1秒
 152   2          LCD_ShowNum(1,1,Result,3);  //在LCD的1行1列显示Result，长度为3位
 153   2        }
 154   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    302    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
